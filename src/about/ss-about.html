<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../shared-styles.html">
<link rel="import" href="../../bower_components/app-layout/app-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-grid/app-grid-style.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/l2t-paper-rating/l2t-paper-rating.html">
<link rel="import" href="../../bower_components/google-chart/google-chart.html">

<dom-module id="ss-about">
    <template>
        <style include="app-grid-style shared-styles ">
            :host {
                display: block;
                padding: 10px;
            }

            figure {
                --app-grid-columns: 1;
            }

            #logo {
                width: 100%;
            }

            l2t-paper-rating {
                padding-bottom: 2em;
                display:block;
                margin: 0 auto;
                text-align: center;
            }

            google-chart {
                width: 100%;
                padding-top: 2em;
                padding-bottom: 2em;
            }
            
 
        </style>

        <div class="card">

            <img id="logo" src="./images/sights-sounds-logo.svg"/>

            <l2t-paper-rating rating="{{ starRating }}"></l2t-paper-rating>

            <paper-button raised class="indigo" on-click="resetRating">
                <iron-icon icon="icons:star"></iron-icon>
                Reset Rating
            </paper-button>

            <google-chart type="gauge" data="[[batteryChartData]]"></google-chart>

        </div>
    </template>

    <script>
        class About extends Polymer.Element {
            static get is() {
                return 'ss-about';
            }

            static get properties() {
                return {
                    starRating: {
                        type: Number,
                        value: 4
                    },
                    batteryLevel: Number,
                    batteryChartData: {
                        type: Object,
                        computed: 'computeChartData(batteryLevel)'
                    }
                };
            }

            ready() {
                super.ready();
                this.readBatteryStatus();
            }

            readBatteryStatus() {
                if ('getBattery' in navigator) {
                    navigator.getBattery().then( (batteryManager) => {
                        this.set('batteryLevel', batteryManager.level);
                    });
                }
            }

            computeChartData(batteryLevel) {
                return [
                    ["Label", "Value"],
                    ["Battery", batteryLevel * 100]
                ];
            }

            resetRating() {
                this.set('starRating', 5);
            }

        }

        window.customElements.define(About.is, About);
    </script>
</dom-module>